<div class="card">
    <div class="card-body">
        <h3><i class="fas fa-calendar-alt"></i> Horários Agendados</h3>

        <div class="direita">
            <!-- Filtro por Mês e Ano -->
            <div class="d-flex mb-3">
                <input 
                    type="month" 
                    class="form-control" 
                    [(ngModel)]="mesAno" 
                    (change)="onMonthChange()"
                    placeholder="Selecione o mês"
                />
            </div>

            <button type="button" class="btn btn-novo btn-rounded" mdbRipple (click)="new()">
                Novo
            </button>

            <table class="table align-middle mb-0 bg-white">
                <thead class="table-dark">
                    <tr>
                        <th>Funcionario</th>
                        <th>Cliente</th>
                        <th>Atendimento</th>
                        <th>Preço</th>
                        <th>Dia</th>
                        <th>Hora</th>
                        <th>Observação</th>
                        <th>Ações</th>
                    </tr>
                </thead>
                <tbody>
                    @for (Atendimento of lista; track $index) {
                        <tr>
                        <td>{{ Atendimento.cliente.nome }}</td>
                        <td>{{ Atendimento.funcionario.nome }}</td>
                        <td>{{  Atendimento.tipo_atendimento.descricao}}</td>
                        <td>{{  Atendimento.tipo_atendimento.preco}}</td>
                        <td>{{ Atendimento.data_atendimento}}</td>
                        <td>{{ Atendimento.hora_atendimento }}</td>
                        <td>{{ Atendimento.observacao }}</td>
                        <td>
                            <button
                                type="button"
                                class="btn btn-primary btn-rounded btn-sm fw-bold"
                                mdbRipple rippleColor="dark"
                                (click)="edit(Atendimento)"
                            >
                                Editar
                            </button>
                            <button
                                type="button"
                                class="btn btn-danger btn-rounded btn-sm fw-bold"
                                mdbRipple rippleColor="dark"
                                (click)="deleteById(Atendimento)"
                            >
                                Apagar
                            </button>
                        </td>
                    </tr>
                    }
                </tbody>
            </table>
        </div>
    </div>

    <ng-template #modalAtendimentoDetalhe>
        <div class="modal-header">
            <h5 class="modal-title" id="exampleModalLabel">Cadastro</h5>
            <button
                type="button"
                class="btn-close"
                aria-label="Close"
                (click)="modalRef.close()"
            ></button>
        </div>
        <div class="modal-body">
            <app-atendimentodetails [atendimento]="AtendimentoEdit" (retorno)="retornoDetalhe($event)"></app-atendimentodetails>
        </div>
    </ng-template>
</div>
